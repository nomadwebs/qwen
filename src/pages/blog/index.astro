---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { sortByDateDesc, getReadingTime } from '../../lib/blog';

const posts = sortByDateDesc(await getCollection('blog'));
---

<BaseLayout
  title="Blog | Fran Sánchez"
  description="Artículos sobre SAP, procesos robustos y producto digital desde una perspectiva técnica y práctica."
  pathname="/blog"
>
  <section class="section container">
    <h1>Blog</h1>
    <div class="grid">
      {posts.map((post) => (
        <article class="card">
          <h2><a href={`/blog/${post.data.slug}`}>{post.data.title}</a></h2>
          <p>{post.data.description}</p>
          <p class="meta">
            {post.data.date} · {getReadingTime(post.body)} min lectura
          </p>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
